<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Period Tracker">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiByeD0iNDAiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzEpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MF9saW5lYXJfMV8xIiB4MT0iMCIgeTE9IjAiIHgyPSIxODAiIHkyPSIxODAiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzY2N2VlYSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8dGV4dCB4PSI5MCIgeT0iMTEwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSI2MCIgZm9udC1mYW1pbHk9IkFyaWFsIj7wn4y4PC90ZXh0Pgo8L3N2Zz4K">
    <title>Period Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            color: #333;
        }

        .app {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 1.5em;
            font-weight: 600;
        }

        .content {
            padding: 0;
        }

        .section {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section h2 {
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #333;
            font-weight: 600;
        }

        /* Calendar Navigation */
        .calendar-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            gap: 15px;
        }

        .nav-button {
            background: #667eea;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-button:hover {
            background: #5a67d8;
        }

        .month-year {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
            min-width: 120px;
            text-align: center;
        }

        /* Calendar Grid */
        .calendar-grid {
            width: 100%;
            border-collapse: collapse;
        }

        .calendar-grid th,
        .calendar-grid td {
            width: 14.28%;
            height: 45px;
            text-align: center;
            vertical-align: middle;
            position: relative;
        }

        .calendar-grid th {
            font-size: 12px;
            color: #666;
            font-weight: 600;
            background: #f8f9fa;
            height: 35px;
        }

        .calendar-grid td {
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid #f0f0f0;
        }

        .calendar-grid td:hover {
            background: #f0f0f0;
        }

        .calendar-day {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 500;
        }

        .other-month {
            color: #ccc;
            cursor: default;
        }

        .other-month:hover {
            background: transparent;
        }

        .period-day {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            border-radius: 8px;
        }

        .predicted-day {
            background: linear-gradient(135deg, #ffd93d, #ff6b9d);
            color: white;
            opacity: 0.8;
            border-radius: 8px;
        }

        .today {
            border: 2px solid #667eea;
            border-radius: 8px;
            font-weight: bold;
        }

        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            font-size: 12px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        .legend-period {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
        }

        .legend-predicted {
            background: linear-gradient(135deg, #ffd93d, #ff6b9d);
            opacity: 0.8;
        }

        .legend-today {
            border: 2px solid #667eea;
            background: white;
        }

        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Forms */
        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .btn-small {
            width: auto;
            padding: 8px 16px;
            font-size: 14px;
            display: inline-block;
            margin-right: 10px;
            margin-top: 5px;
        }

        .btn-danger {
            background: #e53e3e;
        }

        /* History */
        .history-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-date {
            font-weight: 500;
        }

        .history-count {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
        }

        .empty-state {
            text-align: center;
            color: #999;
            font-style: italic;
            padding: 30px;
        }

        /* Data sharing */
        .data-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .data-buttons button {
            flex: 1;
            padding: 10px;
            font-size: 14px;
        }

        .help-text {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
        }

        #importFile {
            display: none;
        }
    </style>
</head>
<body>
    <div class="app">
        <div class="header">
            <h1>üå∏ Period Tracker</h1>
        </div>

        <div class="content">
            <!-- Calendar Section -->
            <div class="section">
                <h2>Calendar - Click Days to Log Period</h2>
                
                <div class="calendar-nav">
                    <button class="nav-button" onclick="previousMonth()">‚Äπ</button>
                    <div class="month-year" id="currentMonthYear">August 2025</div>
                    <button class="nav-button" onclick="nextMonth()">‚Ä∫</button>
                </div>

                <table class="calendar-grid">
                    <thead>
                        <tr>
                            <th>Sun</th>
                            <th>Mon</th>
                            <th>Tue</th>
                            <th>Wed</th>
                            <th>Thu</th>
                            <th>Fri</th>
                            <th>Sat</th>
                        </tr>
                    </thead>
                    <tbody id="calendar-body">
                    </tbody>
                </table>

                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color legend-period"></div>
                        <span>Period</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-predicted"></div>
                        <span>Predicted</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-today"></div>
                        <span>Today</span>
                    </div>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="section">
                <h2>Your Cycle Stats</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-value" id="avgCycle">--</span>
                        <div class="stat-label">Avg Cycle</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="avgPeriod">--</span>
                        <div class="stat-label">Avg Period</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="nextPeriod">--</span>
                        <div class="stat-label">Next Period</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-value" id="daysSince">--</span>
                        <div class="stat-label">Days Since</div>
                    </div>
                </div>
            </div>

            <!-- Manual Entry Section -->
            <div class="section">
                <h2>Manual Entry</h2>
                <div class="form-group">
                    <label>Start Date:</label>
                    <input type="date" id="startDate">
                </div>
                <div class="form-group">
                    <label>End Date:</label>
                    <input type="date" id="endDate">
                </div>
                <button class="btn" onclick="addPeriod()">Add Period</button>
            </div>

            <!-- History Section -->
            <div class="section">
                <h2>Period History</h2>
                <div id="periodHistory"></div>
            </div>

            <!-- Data & Sharing Section -->
            <div class="section">
                <h2>Data & Sharing</h2>
                <div class="data-buttons">
                    <button class="btn btn-small" onclick="exportData()">üì§ Export</button>
                    <button class="btn btn-small" onclick="importData()">üì• Import</button>
                    <button class="btn btn-small btn-danger" onclick="clearAllData()">üóëÔ∏è Clear</button>
                </div>
                <input type="file" id="importFile" accept=".json" onchange="handleImportFile(event)">
                <div class="help-text">
                    <strong>üí° Sharing:</strong> Export your data to share with your partner. They can import it to see your cycle information.
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        let markedDays = {};
        let currentCalendarMonth = new Date().getMonth();
        let currentCalendarYear = new Date().getFullYear();

        // Utility functions
        function getMonthKey(year, month) {
            return `${year}-${String(month + 1).padStart(2, '0')}`;
        }

        function getCurrentMonthKey() {
            return getMonthKey(currentCalendarYear, currentCalendarMonth);
        }

        // Data persistence
        function loadData() {
            try {
                const saved = localStorage.getItem('periodTrackerData');
                if (saved) {
                    markedDays = JSON.parse(saved);
                }
            } catch (error) {
                console.log('Error loading data:', error);
                markedDays = {};
            }
        }

        function saveData() {
            try {
                localStorage.setItem('periodTrackerData', JSON.stringify(markedDays));
            } catch (error) {
                console.log('Error saving data:', error);
            }
        }

        // Period management
        function togglePeriodDay(dayNumber) {
            const monthKey = getCurrentMonthKey();
            
            if (!markedDays[monthKey]) {
                markedDays[monthKey] = [];
            }
            
            const index = markedDays[monthKey].indexOf(dayNumber);
            if (index > -1) {
                markedDays[monthKey].splice(index, 1);
                if (markedDays[monthKey].length === 0) {
                    delete markedDays[monthKey];
                }
            } else {
                markedDays[monthKey].push(dayNumber);
                markedDays[monthKey].sort((a, b) => a - b);
            }
            
            saveData();
            updateDisplay();
        }

        function addPeriod() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;

            if (!startDate || !endDate) {
                alert('Please select both start and end dates');
                return;
            }

            if (new Date(startDate) > new Date(endDate)) {
                alert('Start date must be before end date');
                return;
            }

            const start = new Date(startDate);
            const end = new Date(endDate);
            const currentDate = new Date(start);
            
            while (currentDate <= end) {
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                const day = currentDate.getDate();
                const monthKey = getMonthKey(year, month);
                
                if (!markedDays[monthKey]) {
                    markedDays[monthKey] = [];
                }
                
                if (!markedDays[monthKey].includes(day)) {
                    markedDays[monthKey].push(day);
                    markedDays[monthKey].sort((a, b) => a - b);
                }
                
                currentDate.setDate(currentDate.getDate() + 1);
            }

            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';

            saveData();
            updateDisplay();
        }

        // Navigation
        function previousMonth() {
            currentCalendarMonth--;
            if (currentCalendarMonth < 0) {
                currentCalendarMonth = 11;
                currentCalendarYear--;
            }
            updateCalendar();
        }

        function nextMonth() {
            currentCalendarMonth++;
            if (currentCalendarMonth > 11) {
                currentCalendarMonth = 0;
                currentCalendarYear++;
            }
            updateCalendar();
        }

        // Display updates
        function updateDisplay() {
            updateHistory();
            updateStats();
            updateCalendar();
        }

        function getAllPeriodGroups() {
            const allDates = [];
            
            Object.keys(markedDays).forEach(monthKey => {
                const [year, month] = monthKey.split('-');
                markedDays[monthKey].forEach(day => {
                    allDates.push({
                        year: parseInt(year),
                        month: parseInt(month) - 1,
                        day: day,
                        date: new Date(parseInt(year), parseInt(month) - 1, day)
                    });
                });
            });
            
            allDates.sort((a, b) => a.date - b.date);
            
            if (allDates.length === 0) return [];
            
            const groups = [];
            let currentGroup = [allDates[0]];
            
            for (let i = 1; i < allDates.length; i++) {
                const prevDate = allDates[i - 1].date;
                const currentDate = allDates[i].date;
                const dayDiff = (currentDate - prevDate) / (1000 * 60 * 60 * 24);
                
                if (dayDiff <= 7) {
                    currentGroup.push(allDates[i]);
                } else {
                    groups.push(currentGroup);
                    currentGroup = [allDates[i]];
                }
            }
            
            groups.push(currentGroup);
            return groups.reverse();
        }

        function updateHistory() {
            const historyDiv = document.getElementById('periodHistory');
            const groups = getAllPeriodGroups();
            
            if (groups.length === 0) {
                historyDiv.innerHTML = '<div class="empty-state">No periods logged yet.<br>Click on calendar days to start tracking!</div>';
                return;
            }

            historyDiv.innerHTML = groups.map((group, index) => {
                const firstDay = group[0];
                const lastDay = group[group.length - 1];
                const markedCount = group.length;
                
                let dateDisplay;
                if (markedCount === 1) {
                    dateDisplay = `${firstDay.month + 1}/${firstDay.day}/${firstDay.year}`;
                } else {
                    dateDisplay = `${firstDay.month + 1}/${firstDay.day}/${firstDay.year} to ${lastDay.month + 1}/${lastDay.day}/${lastDay.year}`;
                }
                
                return `
                    <div class="history-item">
                        <div>
                            <div class="history-date">${dateDisplay}</div>
                            <div class="history-count">${markedCount} marked day${markedCount === 1 ? '' : 's'}</div>
                        </div>
                        <button class="delete-btn" onclick="deleteGroup(${index})">Delete</button>
                    </div>
                `;
            }).join('');
        }

        function deleteGroup(groupIndex) {
            const groups = getAllPeriodGroups();
            const group = groups[groupIndex];
            
            group.forEach(dayObj => {
                const monthKey = getMonthKey(dayObj.year, dayObj.month);
                if (markedDays[monthKey]) {
                    const index = markedDays[monthKey].indexOf(dayObj.day);
                    if (index > -1) {
                        markedDays[monthKey].splice(index, 1);
                        if (markedDays[monthKey].length === 0) {
                            delete markedDays[monthKey];
                        }
                    }
                }
            });
            
            saveData();
            updateDisplay();
        }

        function updateStats() {
            const avgCycleEl = document.getElementById('avgCycle');
            const avgPeriodEl = document.getElementById('avgPeriod');
            const nextPeriodEl = document.getElementById('nextPeriod');
            const daysSinceEl = document.getElementById('daysSince');

            const groups = getAllPeriodGroups();

            if (groups.length === 0) {
                avgCycleEl.textContent = '--';
                avgPeriodEl.textContent = '--';
                nextPeriodEl.textContent = '--';
                daysSinceEl.textContent = '--';
                return;
            }

            const periodLengths = groups.map(group => {
                const startDate = group[0].date;
                const endDate = group[group.length - 1].date;
                return Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;
            });
            const avgPeriodLength = Math.round(periodLengths.reduce((sum, length) => sum + length, 0) / periodLengths.length);
            avgPeriodEl.textContent = `${avgPeriodLength}d`;

            if (groups.length > 1) {
                const sortedGroups = [...groups].reverse();
                const cycleLengths = [];
                for (let i = 1; i < sortedGroups.length; i++) {
                    const prevStart = sortedGroups[i-1][0].date;
                    const currentStart = sortedGroups[i][0].date;
                    const cycleLength = Math.ceil((currentStart - prevStart) / (1000 * 60 * 60 * 24));
                    cycleLengths.push(cycleLength);
                }
                const avgCycleLength = Math.round(cycleLengths.reduce((a, b) => a + b, 0) / cycleLengths.length);
                avgCycleEl.textContent = `${avgCycleLength}d`;

                const lastPeriodStart = groups[0][0].date;
                const nextPeriodDate = new Date(lastPeriodStart);
                nextPeriodDate.setDate(nextPeriodDate.getDate() + avgCycleLength);
                nextPeriodEl.textContent = `${nextPeriodDate.getMonth() + 1}/${nextPeriodDate.getDate()}`;
            } else {
                avgCycleEl.textContent = '--';
                nextPeriodEl.textContent = '--';
            }

            const lastGroup = groups[0];
            const lastDay = lastGroup[lastGroup.length - 1];
            const today = new Date();
            const daysSince = Math.floor((today - lastDay.date) / (1000 * 60 * 60 * 24));
            daysSinceEl.textContent = `${daysSince}d`;
        }

        function getPredictedDays() {
            const groups = getAllPeriodGroups();
            
            if (groups.length < 2) return [];
            
            const sortedGroups = [...groups].reverse();
            const cycleLengths = [];
            for (let i = 1; i < sortedGroups.length; i++) {
                const prevStart = sortedGroups[i-1][0].date;
                const currentStart = sortedGroups[i][0].date;
                const cycleLength = Math.ceil((currentStart - prevStart) / (1000 * 60 * 60 * 24));
                cycleLengths.push(cycleLength);
            }
            
            if (cycleLengths.length === 0) return [];
            
            const avgCycleLength = Math.round(cycleLengths.reduce((a, b) => a + b, 0) / cycleLengths.length);
            
            const periodLengths = groups.map(group => {
                const startDate = group[0].date;
                const endDate = group[group.length - 1].date;
                return Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;
            });
            const avgPeriodLength = Math.round(periodLengths.reduce((sum, length) => sum + length, 0) / periodLengths.length);
            
            const lastPeriodStart = groups[0][0].date;
            const predictedStart = new Date(lastPeriodStart);
            predictedStart.setDate(predictedStart.getDate() + avgCycleLength);
            
            const predictedDays = [];
            for (let i = 0; i < avgPeriodLength; i++) {
                const predictedDay = new Date(predictedStart);
                predictedDay.setDate(predictedDay.getDate() + i);
                
                if (predictedDay.getMonth() === currentCalendarMonth && 
                    predictedDay.getFullYear() === currentCalendarYear) {
                    predictedDays.push(predictedDay.getDate());
                }
            }
            
            return predictedDays;
        }

        function updateCalendar() {
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                              'July', 'August', 'September', 'October', 'November', 'December'];
            
            document.getElementById('currentMonthYear').textContent = 
                `${monthNames[currentCalendarMonth]} ${currentCalendarYear}`;

            const currentMonthKey = getCurrentMonthKey();
            const currentMonthMarkedDays = markedDays[currentMonthKey] || [];
            const predictedDays = getPredictedDays();
            const today = new Date();

            const firstDay = new Date(currentCalendarYear, currentCalendarMonth, 1);
            const lastDay = new Date(currentCalendarYear, currentCalendarMonth + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());

            const calendarBody = document.getElementById('calendar-body');
            calendarBody.innerHTML = '';

            for (let week = 0; week < 6; week++) {
                const row = document.createElement('tr');
                
                for (let day = 0; day < 7; day++) {
                    const cell = document.createElement('td');
                    const currentDate = new Date(startDate);
                    currentDate.setDate(startDate.getDate() + (week * 7) + day);
                    
                    const dayNumber = currentDate.getDate();
                    const isCurrentMonth = currentDate.getMonth() === currentCalendarMonth;
                    
                    const dayDiv = document.createElement('div');
                    dayDiv.className = 'calendar-day';
                    dayDiv.textContent = dayNumber;
                    
                    if (!isCurrentMonth) {
                        dayDiv.classList.add('other-month');
                    } else {
                        cell.addEventListener('click', () => togglePeriodDay(dayNumber));
                        
                        if (currentMonthMarkedDays.includes(dayNumber)) {
                            dayDiv.classList.add('period-day');
                        } else if (predictedDays.includes(dayNumber)) {
                            dayDiv.classList.add('predicted-day');
                        }
                    }
                    
                    if (currentDate.toDateString() === today.toDateString()) {
                        dayDiv.classList.add('today');
                    }
                    
                    cell.appendChild(dayDiv);
                    row.appendChild(cell);
                }
                
                calendarBody.appendChild(row);
            }
        }

        // Data import/export
        function exportData() {
            const data = {
                markedDays: markedDays,
                exportDate: new Date().toISOString(),
                version: "1.0"
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `period-tracker-data-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            alert('‚úÖ Data exported! Share this file with your partner.');
        }

        function importData() {
            document.getElementById('importFile').click();
        }

        function handleImportFile(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.markedDays) {
                        Object.keys(data.markedDays).forEach(monthKey => {
                            if (!markedDays[monthKey]) {
                                markedDays[monthKey] = [];
                            }
                            
                            data.markedDays[monthKey].forEach(day => {
                                if (!markedDays[monthKey].includes(day)) {
                                    markedDays[monthKey].push(day);
                                }
                            });
                            
                            markedDays[monthKey].sort((a, b) => a - b);
                        });
                        
                        saveData();
                        updateDisplay();
                        alert('‚úÖ Data imported successfully!');
                    } else {
                        alert('‚ùå Invalid file format');
                    }
                } catch (error) {
                    alert('‚ùå Error reading file: ' + error.message);
                }
            };
            
            reader.readAsText(file);
            event.target.value = '';
        }

        function clearAllData() {
            if (confirm('‚ö†Ô∏è Are you sure you want to delete all period data? This cannot be undone.')) {
                markedDays = {};
                saveData();
                updateDisplay();
                alert('‚úÖ All data cleared');
            }
        }

        // Initialize the app
        loadData();
        updateDisplay();
    </script>
</body>
</html>
